version: 1
backend:
  phases:
    preBuild:
      commands:
        - aws --version
        - docker --version 2>/dev/null || echo 'Docker not installed'
        - docker-compose --version 2>/dev/null || echo 'Docker Compose not installed'
        - mvn --version 2>/dev/null || echo 'Maven not installed'
        - gradle -v 2>/dev/null || echo 'Gradle not installed'
        - python -V 2>/dev/null || echo 'Python not installed'
        - python3 -V 2>/dev/null || echo 'Python3 not installed'
        - java -version 2>/dev/null || echo 'Java not installed'
        - php -v 2>/dev/null || echo 'PHP not installed'
        - ruby -v 2>/dev/null || echo 'Ruby not installed'
        - perl -v 2>/dev/null || echo 'Perl not installed'
        - go version 2>/dev/null || echo 'Go not installed'
        - node --version  2>/dev/null || echo 'Node.js not installed'
        - echo '---------------------------------------------'
        - ls -l /usr/lib/jvm/
        - echo '---------------------------------------------'
        - env | sort
        - echo '---------------------------------------------'
        - rpm -qa --qf "%{NAME},%{VERSION}\n" | sort
        - echo '---------------------------------------------'
        - for x in ${PATH//:/ }; do ls -1 $x; done | sort | uniq
        - echo '---------------------------------------------'
        - rpm -qa --qf "%{NAME},%{VERSION}\n"
        - alias      
    build:
      commands:
        - '# Execute Amplify CLI with the helper script'
        - amplifyPush --simple
frontend:
  phases:
    preBuild:
      commands:
        - yarn install
    build:
      commands:
        - yarn run build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
